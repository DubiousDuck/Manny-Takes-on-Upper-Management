[gd_scene load_steps=65 format=4 uid="uid://djm6vvof7v5n3"]

[ext_resource type="Script" uid="uid://cnhl17c64l7q3" path="res://stages/level.gd" id="1_2gskb"]
[ext_resource type="Script" uid="uid://djvdtgfogyblr" path="res://items/item.gd" id="2_ned6s"]
[ext_resource type="Resource" uid="uid://cmbuwcas04j4x" path="res://items/glow_gem.tres" id="3_wnkk8"]
[ext_resource type="Resource" uid="uid://cmir8fmxx6qcf" path="res://items/sturdy_helmet.tres" id="4_sonre"]
[ext_resource type="Resource" uid="uid://t0inmfkk5ymh" path="res://items/sword.tres" id="5_purbc"]
[ext_resource type="Texture2D" uid="uid://poqgc4hh2x4k" path="res://assets/ui/backdrop.png" id="6_dxr3n"]
[ext_resource type="PackedScene" uid="uid://pk22c3kx6qrk" path="res://ui/battle_related/unit_preview.tscn" id="7_epmcu"]
[ext_resource type="PackedScene" uid="uid://ccyqfgjflvtm5" path="res://unit/unit_ui/skill_select_canvas.tscn" id="8_dqg72"]
[ext_resource type="PackedScene" uid="uid://1ig65m78igxg" path="res://ui/pause_menu/pause_canvas_layer.tscn" id="9_f57dk"]
[ext_resource type="PackedScene" uid="uid://dfdd8xbpcid00" path="res://map/tile_map_test.tscn" id="10_kjunh"]
[ext_resource type="TileSet" uid="uid://od08ebdovrmi" path="res://map/new_tile_set.tres" id="11_58i0i"]
[ext_resource type="Script" uid="uid://8i8kpg1j5tm3" path="res://other_map_components/cell_highlights.gd" id="12_74x4g"]
[ext_resource type="Script" uid="uid://m4va30p723ef" path="res://stages/camera_2d.gd" id="13_jywvk"]
[ext_resource type="Script" uid="uid://bfxxedn2yy5f1" path="res://unit/UnitGroupController.gd" id="14_8x42o"]
[ext_resource type="Script" uid="uid://bbill7nmmgdwt" path="res://unit/UnitContainer.gd" id="15_3fi66"]
[ext_resource type="PackedScene" uid="uid://s6hbciun8a1p" path="res://unit/unit.tscn" id="16_lkprc"]
[ext_resource type="Script" uid="uid://csbdrgblw3276" path="res://unit/PlayerUnit.gd" id="17_liipu"]
[ext_resource type="Script" uid="uid://d2mnyc15434nn" path="res://unit/params/unit_data.gd" id="18_vnpj4"]
[ext_resource type="Script" uid="uid://cupoy0ff6a5jr" path="res://skills/skill_info.gd" id="19_63433"]
[ext_resource type="Resource" uid="uid://blts5vx256a3e" path="res://skills/basic_punch.tres" id="20_7kcih"]
[ext_resource type="Resource" uid="uid://mgaahup4u5tt" path="res://skills/wait.tres" id="21_im3xb"]
[ext_resource type="Resource" uid="uid://b1f1rc00m4al5" path="res://skills/pick_up.tres" id="22_wco0m"]
[ext_resource type="Resource" uid="uid://ipuxhkgcm6c8" path="res://skills/banana_peel.tres" id="23_vcu1o"]
[ext_resource type="Resource" uid="uid://bnvgg27wo1d4d" path="res://skills/battle_cry.tres" id="24_emnmj"]
[ext_resource type="Resource" uid="uid://dih6jk7pagjwy" path="res://skills/lunch_break.tres" id="25_0s3g5"]
[ext_resource type="Resource" uid="uid://djdvj5a6lkpfk" path="res://skills/stink_bomb.tres" id="26_c0cqe"]
[ext_resource type="Resource" uid="uid://vj8f7rj2pqua" path="res://skills/throw_candy.tres" id="27_ctchy"]
[ext_resource type="Resource" uid="uid://b0eqr8p4qsvpi" path="res://skills/basic_shoot.tres" id="28_nq0x5"]
[ext_resource type="Resource" uid="uid://du6pn6p8fxwnq" path="res://skills/raise_attack.tres" id="29_fckmp"]
[ext_resource type="Resource" uid="uid://cs7swlwlpc0ir" path="res://skills/poison_bubble.tres" id="30_mu7mt"]
[ext_resource type="Resource" uid="uid://p577kdiq1x8g" path="res://skills/mop_swipe.tres" id="31_ykd4e"]
[ext_resource type="Resource" uid="uid://bv5dwvd6v0vh0" path="res://skills/boot_dash.tres" id="32_p61gy"]
[ext_resource type="Resource" uid="uid://te4wlyc81khx" path="res://skills/arrow_rain.tres" id="33_oui60"]
[ext_resource type="Resource" uid="uid://bi1f7lnbriwrk" path="res://skills/file_slam.tres" id="34_s3qux"]
[ext_resource type="Resource" uid="uid://dilc2xhbogfv0" path="res://skills/meditate.tres" id="35_8dopd"]
[ext_resource type="Resource" uid="uid://bw52nj7xy3w4y" path="res://skills/forgetful_hammer.tres" id="36_57bvx"]
[ext_resource type="Resource" uid="uid://dneydg46sytpb" path="res://skills/deadline_grip.tres" id="37_3mgvo"]
[ext_resource type="Resource" uid="uid://get0lriapb2v" path="res://skills/cubicle_slap.tres" id="38_5fovt"]
[ext_resource type="Resource" uid="uid://djy537r81hp18" path="res://skills/whirlwind.tres" id="39_2kr00"]
[ext_resource type="Resource" uid="uid://cebsakqjxt46" path="res://skills/defend.tres" id="40_7vw0k"]
[ext_resource type="Resource" uid="uid://prvfgn6uwghm" path="res://skills/lower_attack.tres" id="41_8i4vs"]
[ext_resource type="Resource" uid="uid://d1y5n3fvcjm0t" path="res://skills/heroic_rescue.tres" id="42_s6yrg"]
[ext_resource type="Resource" uid="uid://vdbmy1yf5qs" path="res://skills/pep_talk.tres" id="43_t5j2t"]
[ext_resource type="Resource" uid="uid://dw3vrw7r5fpm6" path="res://skills/courageous_cry.tres" id="44_3bfmn"]
[ext_resource type="Resource" uid="uid://ce2x4vy4yg5b6" path="res://skills/perfect_defense.tres" id="45_qsp54"]
[ext_resource type="Resource" uid="uid://csff25ylodec5" path="res://skills/magic_shot.tres" id="46_gor0t"]
[ext_resource type="Resource" uid="uid://bxsa4bulom2b4" path="res://skills/raise_magic.tres" id="47_4gxa4"]
[ext_resource type="Resource" uid="uid://rk42x6t20aw5" path="res://skills/magic_boulder.tres" id="48_1rx0w"]
[ext_resource type="Resource" uid="uid://bch56yrcacr1o" path="res://skills/throw_tantrum.tres" id="49_hjh6n"]
[ext_resource type="Resource" uid="uid://dp7wh6abi6nd2" path="res://skills/throw_lego.tres" id="50_66uxj"]
[ext_resource type="Resource" uid="uid://da8pyj7jt2g1" path="res://skills/lego_rain.tres" id="51_kww66"]
[ext_resource type="Script" uid="uid://skfirkbw22xf" path="res://unit/EnemyUnit.gd" id="52_7h3iv"]
[ext_resource type="Resource" uid="uid://fd2mmkj0ry80" path="res://unit/params/special_enemies/CEO.tres" id="53_ned6s"]
[ext_resource type="Script" uid="uid://dda521hi48f5d" path="res://unit/params/other_structures/bonus_stat.gd" id="54_sonre"]
[ext_resource type="Resource" uid="uid://k5gy8n00eull" path="res://unit/params/mage.tres" id="54_wnkk8"]

[sub_resource type="Resource" id="Resource_ned6s"]
script = ExtResource("18_vnpj4")
id = 0
level = 11
exp = 0
unit_class = "Protagonist"
stat = Dictionary[int, int]({
0: 4,
1: 2,
2: 2,
3: 2
})
stat_growth_table = Dictionary[int, Dictionary]({
2: {
0: 1
},
3: {
1: 1
},
4: {
2: 1
},
5: {
0: 2
},
7: {
1: 1,
2: 1
},
8: {
0: 1
},
9: {
1: 1,
2: 1
},
10: {
0: 2
},
12: {
1: 2
},
13: {
2: 2
},
15: {
0: 1,
1: 1,
2: 1
},
16: {
1: 1,
2: 1
},
17: {
0: 2
},
18: {
2: 2
},
19: {
1: 2
},
20: {
0: 1,
1: 1,
2: 1
}
})
skill_list = Array[ExtResource("19_63433")]([ExtResource("20_7kcih"), ExtResource("21_im3xb")])
skill_table = Dictionary[int, ExtResource("19_63433")]({
2: ExtResource("22_wco0m"),
4: ExtResource("23_vcu1o"),
6: ExtResource("24_emnmj"),
8: ExtResource("25_0s3g5"),
10: ExtResource("26_c0cqe"),
11: ExtResource("27_ctchy")
})
item_list = Array[ExtResource("2_ned6s")]([])

[sub_resource type="Resource" id="Resource_epmcu"]
script = ExtResource("18_vnpj4")
id = 0
level = 11
exp = 0
unit_class = "Ranger"
stat = Dictionary[int, int]({
0: 4,
1: 3,
2: 1,
3: 1
})
stat_growth_table = Dictionary[int, Dictionary]({
2: {
0: 1
},
3: {
1: 1
},
4: {
1: 1
},
5: {
0: 2
},
7: {
1: 1,
2: 1
},
8: {
0: 1
},
9: {
1: 1,
2: 1
},
10: {
0: 2
},
12: {
1: 2
},
13: {
2: 1
},
15: {
0: 1,
1: 1,
2: 1
},
16: {
1: 1,
2: 1
},
17: {
0: 2
},
18: {
2: 2
},
19: {
1: 2
},
20: {
0: 1,
1: 1,
2: 1
}
})
skill_list = Array[ExtResource("19_63433")]([ExtResource("28_nq0x5"), ExtResource("21_im3xb")])
skill_table = Dictionary[int, ExtResource("19_63433")]({
3: ExtResource("29_fckmp"),
5: ExtResource("30_mu7mt"),
7: ExtResource("31_ykd4e"),
9: ExtResource("32_p61gy"),
11: ExtResource("33_oui60")
})
item_list = Array[ExtResource("2_ned6s")]([])

[sub_resource type="Resource" id="Resource_dqg72"]
script = ExtResource("18_vnpj4")
id = 0
level = 11
exp = 0
unit_class = "Fighter"
stat = Dictionary[int, int]({
0: 5,
1: 2,
2: 1,
3: 2
})
stat_growth_table = Dictionary[int, Dictionary]({
2: {
0: 1
},
3: {
1: 1
},
4: {
0: 1
},
5: {
0: 2
},
7: {
1: 1,
2: 1
},
9: {
0: 2
},
10: {
1: 1,
2: 1
},
12: {
1: 2
},
13: {
2: 2
}
})
skill_list = Array[ExtResource("19_63433")]([ExtResource("20_7kcih"), ExtResource("21_im3xb")])
skill_table = Dictionary[int, ExtResource("19_63433")]({
2: ExtResource("34_s3qux"),
4: ExtResource("35_8dopd"),
6: ExtResource("36_57bvx"),
8: ExtResource("37_3mgvo"),
10: ExtResource("38_5fovt"),
11: ExtResource("39_2kr00")
})
item_list = Array[ExtResource("2_ned6s")]([])

[sub_resource type="Resource" id="Resource_wnkk8"]
script = ExtResource("18_vnpj4")
id = 0
level = 11
exp = 0
unit_class = "Tank"
stat = Dictionary[int, int]({
0: 6,
1: 1,
2: 1,
3: 2
})
stat_growth_table = Dictionary[int, Dictionary]({
2: {
0: 1
},
3: {
1: 1
},
4: {
2: 1
},
5: {
0: 2
},
7: {
1: 1,
2: 1
},
8: {
0: 1
},
9: {
1: 1,
2: 1
},
10: {
0: 2
},
12: {
1: 2
},
13: {
2: 2
},
15: {
0: 1,
1: 1,
2: 1
},
16: {
1: 1,
2: 1
},
17: {
0: 2
},
18: {
2: 2
},
19: {
1: 2
},
20: {
0: 1,
1: 1,
2: 1
}
})
skill_list = Array[ExtResource("19_63433")]([ExtResource("20_7kcih"), ExtResource("40_7vw0k"), ExtResource("21_im3xb")])
skill_table = Dictionary[int, ExtResource("19_63433")]({
3: ExtResource("41_8i4vs"),
5: ExtResource("29_fckmp"),
7: ExtResource("42_s6yrg"),
9: ExtResource("43_t5j2t"),
10: ExtResource("44_3bfmn"),
12: ExtResource("45_qsp54")
})
item_list = Array[ExtResource("2_ned6s")]([])

[sub_resource type="Resource" id="Resource_f57dk"]
script = ExtResource("18_vnpj4")
id = 0
level = 11
exp = 0
unit_class = "Mage"
stat = Dictionary[int, int]({
0: 4,
1: 1,
2: 3,
3: 1
})
stat_growth_table = Dictionary[int, Dictionary]({
2: {
0: 1
},
3: {
1: 1
},
4: {
2: 1
},
5: {
0: 2
},
7: {
1: 1,
2: 1
},
8: {
0: 1
},
9: {
1: 1,
2: 1
},
10: {
0: 2
},
12: {
1: 2
},
13: {
2: 2
},
15: {
0: 1,
1: 1,
2: 1
},
16: {
1: 1,
2: 1
},
17: {
0: 2
},
18: {
2: 2
},
19: {
1: 2
},
20: {
0: 1,
1: 1,
2: 1
}
})
skill_list = Array[ExtResource("19_63433")]([ExtResource("46_gor0t"), ExtResource("21_im3xb")])
skill_table = Dictionary[int, ExtResource("19_63433")]({
3: ExtResource("47_4gxa4"),
5: ExtResource("48_1rx0w"),
7: ExtResource("49_hjh6n"),
9: ExtResource("50_66uxj"),
11: ExtResource("51_kww66")
})
item_list = Array[ExtResource("2_ned6s")]([])

[sub_resource type="Resource" id="Resource_kjunh"]
script = ExtResource("54_sonre")
stat = "damage_reduction"
value = 0.5
source = "Passive"
duration = -1
metadata/_custom_type_script = "uid://dda521hi48f5d"

[sub_resource type="Resource" id="Resource_sonre"]
script = ExtResource("18_vnpj4")
id = 0
level = 11
exp = 0
unit_class = "Tank"
stat = Dictionary[int, int]({
0: 6,
1: 1,
2: 1,
3: 2
})
stat_growth_table = Dictionary[int, Dictionary]({
2: {
0: 1
},
3: {
1: 1
},
4: {
2: 1
},
5: {
0: 2
},
7: {
1: 1,
2: 1
},
8: {
0: 1
},
9: {
1: 1,
2: 1
},
10: {
0: 2
},
12: {
1: 2
},
13: {
2: 2
},
15: {
0: 1,
1: 1,
2: 1
},
16: {
1: 1,
2: 1
},
17: {
0: 2
},
18: {
2: 2
},
19: {
1: 2
},
20: {
0: 1,
1: 1,
2: 1
}
})
skill_list = Array[ExtResource("19_63433")]([ExtResource("20_7kcih"), ExtResource("40_7vw0k"), ExtResource("21_im3xb")])
skill_table = Dictionary[int, ExtResource("19_63433")]({
3: ExtResource("41_8i4vs"),
5: ExtResource("29_fckmp"),
7: ExtResource("42_s6yrg"),
9: ExtResource("43_t5j2t"),
10: ExtResource("44_3bfmn"),
12: ExtResource("45_qsp54")
})
item_list = Array[ExtResource("2_ned6s")]([])

[sub_resource type="Resource" id="Resource_purbc"]
script = ExtResource("18_vnpj4")
id = 0
level = 11
exp = 0
unit_class = "Fighter"
stat = Dictionary[int, int]({
0: 5,
1: 2,
2: 1,
3: 2
})
stat_growth_table = Dictionary[int, Dictionary]({
2: {
0: 1
},
3: {
1: 1
},
4: {
0: 1
},
5: {
0: 2
},
7: {
1: 1,
2: 1
},
9: {
0: 2
},
10: {
1: 1,
2: 1
},
12: {
1: 2
},
13: {
2: 2
}
})
skill_list = Array[ExtResource("19_63433")]([ExtResource("20_7kcih"), ExtResource("21_im3xb")])
skill_table = Dictionary[int, ExtResource("19_63433")]({
2: ExtResource("34_s3qux"),
4: ExtResource("35_8dopd"),
6: ExtResource("36_57bvx"),
8: ExtResource("37_3mgvo"),
10: ExtResource("38_5fovt"),
11: ExtResource("39_2kr00")
})
item_list = Array[ExtResource("2_ned6s")]([])

[sub_resource type="Resource" id="Resource_dxr3n"]
script = ExtResource("18_vnpj4")
id = 0
level = 11
exp = 0
unit_class = "Ranger"
stat = Dictionary[int, int]({
0: 4,
1: 3,
2: 1,
3: 1
})
stat_growth_table = Dictionary[int, Dictionary]({
2: {
0: 1
},
3: {
1: 1
},
4: {
1: 1
},
5: {
0: 2
},
7: {
1: 1,
2: 1
},
8: {
0: 1
},
9: {
1: 1,
2: 1
},
10: {
0: 2
},
12: {
1: 2
},
13: {
2: 1
},
15: {
0: 1,
1: 1,
2: 1
},
16: {
1: 1,
2: 1
},
17: {
0: 2
},
18: {
2: 2
},
19: {
1: 2
},
20: {
0: 1,
1: 1,
2: 1
}
})
skill_list = Array[ExtResource("19_63433")]([ExtResource("28_nq0x5"), ExtResource("21_im3xb")])
skill_table = Dictionary[int, ExtResource("19_63433")]({
3: ExtResource("29_fckmp"),
5: ExtResource("30_mu7mt"),
7: ExtResource("31_ykd4e"),
9: ExtResource("32_p61gy"),
11: ExtResource("33_oui60")
})
item_list = Array[ExtResource("2_ned6s")]([])

[node name="level3-3" type="Node2D" node_paths=PackedStringArray("tile_map")]
script = ExtResource("1_2gskb")
tile_map = NodePath("TileMapTest")
inital_exp = 40
repeat_exp = 1
dropped_items = Array[ExtResource("2_ned6s")]([ExtResource("3_wnkk8"), ExtResource("4_sonre"), ExtResource("5_purbc")])
give_token = false

[node name="TextureRect" type="TextureRect" parent="."]
modulate = Color(0.990903, 0.387356, 0.40913, 1)
offset_left = -720.0
offset_top = -290.0
offset_right = 3120.0
offset_bottom = 790.0
texture = ExtResource("6_dxr3n")

[node name="UnitPreview" parent="." instance=ExtResource("7_epmcu")]

[node name="SkillSelectCanvas" parent="." node_paths=PackedStringArray("container") instance=ExtResource("8_dqg72")]
container = NodePath("../Units/PlayerGroup")

[node name="PauseCanvasLayer" parent="." instance=ExtResource("9_f57dk")]
isBattleScene = true

[node name="TileMapTest" parent="." instance=ExtResource("10_kjunh")]
tile_map_data = PackedByteArray("AAAAAAEAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAMAAAAAAAAAAAABAAAAAAAAAAAAAAABAAEAAAAAAAAAAAABAAIAAAAAAAAAAAACAAAAAAAAAAAAAAACAAEAAAAAAAAAAAACAAIAAAADAAAAAAACAAMAAAAAAAAAAAADAAAAAAAAAAAAAgADAAEAAAAAAAAAAAADAAIAAAAAAAAAAgAEAAEAAAADAAAAAAAEAAMAAAAAAAAAAAAEAAIAAAAAAAAAAAAEAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAEAAAAAAAAAAAAFAAIAAAAAAAAAAAAGAAMAAAAAAAAAAAAGAAIAAAAAAAAAAAAGAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAD//wIAAAAAAAAAAAAGAAAAAAAAAAAAAAAHAAIAAAAEAAAAAAAHAAAAAAAAAAAAAAD//wAAAAAEAAAAAAA=")
tile_set = ExtResource("11_58i0i")

[node name="CellHighlights" type="Node2D" parent="."]
script = ExtResource("12_74x4g")

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(352, 224)
zoom = Vector2(1.25, 1.25)
script = ExtResource("13_jywvk")

[node name="top_margin" type="Marker2D" parent="Camera2D"]
position = Vector2(0, -146)

[node name="low_margin" type="Marker2D" parent="Camera2D"]
position = Vector2(0, 146)

[node name="Units" type="Node2D" parent="."]
script = ExtResource("14_8x42o")

[node name="PlayerGroup" type="Node2D" parent="Units" node_paths=PackedStringArray("enemy_container")]
script = ExtResource("15_3fi66")
is_player_controlled = true
enemy_container = NodePath("../EnemyGroup")

[node name="Protag3" parent="Units/PlayerGroup" instance=ExtResource("16_lkprc")]
position = Vector2(162, 104)
script = ExtResource("17_liipu")
unit_data = SubResource("Resource_ned6s")

[node name="Protag" parent="Units/PlayerGroup" instance=ExtResource("16_lkprc")]
position = Vector2(64, 263)
script = ExtResource("17_liipu")
unit_data = SubResource("Resource_epmcu")

[node name="Protag2" parent="Units/PlayerGroup" instance=ExtResource("16_lkprc")]
position = Vector2(159, 318)
script = ExtResource("17_liipu")
unit_data = SubResource("Resource_dqg72")

[node name="Protag5" parent="Units/PlayerGroup" instance=ExtResource("16_lkprc")]
position = Vector2(161, 207)
script = ExtResource("17_liipu")
unit_data = SubResource("Resource_wnkk8")

[node name="Protag4" parent="Units/PlayerGroup" instance=ExtResource("16_lkprc")]
position = Vector2(62, 155)
script = ExtResource("17_liipu")
unit_data = SubResource("Resource_f57dk")

[node name="EnemyGroup" type="Node2D" parent="Units" node_paths=PackedStringArray("enemy_container")]
script = ExtResource("15_3fi66")
enemy_container = NodePath("../PlayerGroup")

[node name="EnemyUnit6" parent="Units/EnemyGroup" instance=ExtResource("16_lkprc")]
position = Vector2(541, 211)
script = ExtResource("52_7h3iv")
unit_data = ExtResource("53_ned6s")
bonus_stat = Array[ExtResource("54_sonre")]([SubResource("Resource_kjunh")])

[node name="EnemyUnit5" parent="Units/EnemyGroup" instance=ExtResource("16_lkprc")]
position = Vector2(547, 317)
script = ExtResource("52_7h3iv")
unit_data = SubResource("Resource_sonre")

[node name="EnemyUnit3" parent="Units/EnemyGroup" instance=ExtResource("16_lkprc")]
position = Vector2(545, 101)
script = ExtResource("52_7h3iv")
unit_data = SubResource("Resource_purbc")

[node name="EnemyUnit" parent="Units/EnemyGroup" instance=ExtResource("16_lkprc")]
position = Vector2(641, 157)
script = ExtResource("52_7h3iv")
unit_data = SubResource("Resource_dxr3n")

[node name="EnemyUnit4" parent="Units/EnemyGroup" instance=ExtResource("16_lkprc")]
position = Vector2(640, 265)
script = ExtResource("52_7h3iv")
unit_data = ExtResource("54_wnkk8")

[connection signal="status_update_complete" from="Units" to="Units" method="_on_status_update_complete"]
